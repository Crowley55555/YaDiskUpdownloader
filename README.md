# –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ REST API Gateway (–¢–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏)

–ú–∏–Ω–∏-—É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–æ–º —á–µ—Ä–µ–∑ REST API. **–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å–æ —Å—Å—ã–ª–∫–∞–º–∏** - –Ω–∞ –≤—Ö–æ–¥–µ –∏ –≤—ã—Ö–æ–¥–µ. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º, –≥–¥–µ –Ω–µ–ª—å–∑—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **upload** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –ø–æ URL –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª)
- **download** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (–ø—Ä–∏–≤–∞—Ç–Ω–æ –ø–æ `oauth_token`+`disk_path` –∏–ª–∏ –ø—É–±–ª–∏—á–Ω–æ –ø–æ `public_key`)
- **rename** ‚Äî –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª)
- **delete** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- **list** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–∞–ø–∫–∏ (—Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ —Ñ–∞–π–ª—ã)

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–∫–ª—é—á–µ–≤—ã–µ)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------------|----------|
| `action` | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | `upload` \| `download` \| `rename` \| `delete` \| `list` |
| `oauth_token` | –î–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π | OAuth-—Ç–æ–∫–µ–Ω –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞ |
| `disk_path` | –î–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π | –ü—É—Ç—å –Ω–∞ –î–∏—Å–∫–µ: `disk:/folder/file.txt` (–∏–ª–∏ `disk:/folder` –¥–ª—è list) |
| `file_url` | –î–ª—è upload | URL —Ñ–∞–π–ª–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ |
| `public_key`/`public_path` | –î–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ download | –ö–ª—é—á –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ |

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

- `overwrite` (bool) - –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª –ø—Ä–∏ upload
- `show_progress` (bool) - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
- `chunk_size` (int) - —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
- `limit`, `offset` - –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ list

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install requests
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –ø–æ URL –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫
```python
from yadisk_file_gateway import yadisk_file_gateway

result = yadisk_file_gateway({
    "action": "upload",
    "oauth_token": "YOUR_OAUTH_TOKEN",
    "disk_path": "disk:/my_file.mp3",
    "file_url": "https://example.com/source_file.mp3",
    "overwrite": True,
    "show_progress": True
})
print(result)
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {"ok": True, "data": {"disk_path": "disk:/my_file.mp3", "file_url": "https://disk.yandex.ru/...", "source_url": "https://example.com/source_file.mp3"}}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
```python
# –ü—Ä–∏–≤–∞—Ç–Ω—ã–π —Ñ–∞–π–ª
result = yadisk_file_gateway({
    "action": "download",
    "oauth_token": "YOUR_OAUTH_TOKEN",
    "disk_path": "disk:/my_file.mp3"
})
print(result)
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {"ok": True, "data": {"download_url": "https://cloud-api.yandex.net/...", "file_size": 12345}}

# –ü—É–±–ª–∏—á–Ω—ã–π —Ñ–∞–π–ª
result = yadisk_file_gateway({
    "action": "download",
    "public_key": "https://disk.yandex.ru/d/abc123",
    "public_path": "file.mp3"
})
```

### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
```python
result = yadisk_file_gateway({
    "action": "rename",
    "oauth_token": "YOUR_OAUTH_TOKEN",
    "disk_path": "disk:/old_name.mp3",
    "new_name": "new_name.mp3"
})
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
```

### –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ
```python
result = yadisk_file_gateway({
    "action": "list",
    "oauth_token": "YOUR_OAUTH_TOKEN",
    "disk_path": "disk:/my_folder",
    "limit": 50
})
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ —Å –∏—Ö —Å—Å—ã–ª–∫–∞–º–∏
```

## –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üîó –¢–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏
- **–ù–∞ –≤—Ö–æ–¥–µ**: —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ URL —Ñ–∞–π–ª–æ–≤ (–Ω–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏)
- **–ù–∞ –≤—ã—Ö–æ–¥–µ**: —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏ (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª—å–Ω–æ)
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è**: –ø–ª–∞—Ç—Ñ–æ—Ä–º, –≥–¥–µ –Ω–µ–ª—å–∑—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

### üì§ Upload
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `file_url` - —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ–∞–π–ª –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª

### üì• Download  
- **–û–±—ã—á–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã**: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- **Google Colab**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª –≤ –∫—ç—à `/content/yadisk_cache/` –∏ —Å–æ–∑–¥–∞–µ—Ç HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫—ç—à–∞**: —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –≤ Colab

### üîÑ –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `rename`, `delete`, `list` —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- –ù–æ —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

## üöÄ –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Google Colab

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫—ç—à
–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ Google Colab —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à `/content/yadisk_cache/` –∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫—Ä–∞—Å–∏–≤–∞—è HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –≤ Colab
```python
# –í Google Colab —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç—Å—è –≤ –∫—ç—à
result = yadisk_file_gateway({
    "action": "download",
    "oauth_token": "YOUR_TOKEN",
    "disk_path": "disk:/my_file.mp3",
    "show_progress": True
})

if result["ok"]:
    data = result["data"]
    print(f"–§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω: {data['cached_file_path']}")
    print(f"HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞: {data['html_download_page']}")
    print(f"–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞: {data['direct_file_url']}")
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫—ç—à–∞ –≤ Colab
- ‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
- ‚úÖ –§–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ –≤ `/content/yadisk_cache/`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- ‚úÖ –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –≤ –∫—ç—à–µ

## –ü–æ–ª—É—á–µ–Ω–∏–µ OAuth —Ç–æ–∫–µ–Ω–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [–Ø–Ω–¥–µ–∫—Å.–ü–∞—Å–ø–æ—Ä—Ç](https://passport.yandex.ru/)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ [–Ø–Ω–¥–µ–∫—Å.–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫](https://oauth.yandex.ru/)
3. –ü–æ–ª—É—á–∏—Ç–µ OAuth —Ç–æ–∫–µ–Ω –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞
